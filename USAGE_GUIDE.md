# 氢原子电子云可视化 - 使用指南

## 手势控制系统（新版）

### 交互设计理念

新版手势控制采用**基于手部位置追踪的直接映射**系统，而非复杂的预设手势分类。这种设计更加直观、响应更快、精确度更高。

### 核心操作

#### 🤜 握拳拖拽 = 旋转视角
- **动作**：握紧拳头，移动手部
- **效果**：手部移动直接映射为相机旋转
  - 向左移动 → 视角向左旋转
  - 向右移动 → 视角向右旋转
  - 向上移动 → 视角向上旋转
  - 向下移动 → 视角向下旋转
- **类比**：就像用手抓住物体旋转一样
- **颜色反馈**：手部骨架显示为**绿色**

#### 🖐️ 张开手掌 = 释放控制（待机）
- **动作**：张开手掌
- **效果**：停止控制，进入待机状态
- **惯性**：释放时会保留一定的旋转惯性
- **颜色反馈**：手部骨架显示为**白色**

#### 🤏🤏 双手捏合 = 缩放
- **动作**：双手都做捏合手势（拇指和食指靠近）
- **效果**：
  - 双手靠近 → 缩小视角（远离）
  - 双手分开 → 放大视角（靠近）
- **颜色反馈**：手部骨架显示为**青色**

### 使用技巧

1. **精细控制**：小幅度移动手部可以精确调整视角
2. **快速旋转**：大幅度移动手部可以快速旋转
3. **惯性利用**：松开握拳后视角会继续滑动一段距离
4. **停止旋转**：重新握拳可以立即停止惯性旋转

### 系统要求

- 摄像头：需要网络摄像头
- 网络：首次加载需要下载模型（约2MB）
- 浏览器：需要在 localhost 或 HTTPS 环境下运行

### 启动方式

1. 运行 `python start_server.py` 启动本地服务器
2. 在浏览器中打开 `http://localhost:8000`
3. 等待渲染完成后，点击右上角 🖐️ 按钮启动手势控制

---

## 坐标系大小控制功能

### 功能概述

新的"坐标系大小"滑动条替代了原来的"显示坐标轴"开关，提供了更精确的坐标轴大小控制。

### 核心原理

**比例系数 × 轨道半径 = 坐标轴显示大小**

- **比例系数**：由滑动条控制，范围 0-1.05
- **轨道半径**：由采样过程中的最远距离决定
- **显示大小**：最终的坐标轴长度

### 滑动条说明

#### 范围设置
- **最小值**：0（关闭坐标轴）
- **最大值**：105（对应比例系数1.05）
- **步长**：1
- **默认值**：0（关闭状态）

#### 比例系数计算
```
比例系数 = 滑动条值 ÷ 100
```

**示例**：
- 滑动条值 = 0  → 比例系数 = 0.00 → 坐标轴隐藏
- 滑动条值 = 50 → 比例系数 = 0.50 → 坐标轴为轨道半径的一半
- 滑动条值 = 100 → 比例系数 = 1.00 → 坐标轴等于轨道半径
- 滑动条值 = 105 → 比例系数 = 1.05 → 坐标轴为轨道半径的1.05倍

### 状态控制

#### 可修改状态
- ✅ **渲染开始前**：可以调整滑动条
- ✅ **渲染结束后**：可以调整滑动条
- ✅ **暂停时**：可以调整滑动条

#### 不可修改状态
- 🚫 **渲染进行中**：滑动条置灰，不可调整

### 使用场景

#### 1. 观察微小轨道
对于内层轨道（如1s），可以设置较大的比例系数（0.8-1.05）来放大坐标轴，便于观察。

#### 2. 观察大型轨道  
对于外层轨道（如4f），可以设置较小的比例系数（0.2-0.5）来缩小坐标轴，避免遮挡电子云。

#### 3. 关闭坐标轴
将滑动条拖到最左边（值=0）完全关闭坐标轴显示，获得更清晰的电子云视图。

---

## 常见问题

### Q: 为什么渲染中不能调整坐标轴滑动条？
A: 为了保持渲染过程的稳定性和性能，避免频繁的坐标轴变化影响用户观察。

### Q: 手势控制无法启动？
A: 请确保：
1. 使用 `python start_server.py` 启动服务器
2. 通过 `http://localhost:8000` 访问（而非 file:// 协议）
3. 允许浏览器访问摄像头权限

### Q: 手势识别不准确？
A: 新版系统使用位置追踪而非手势分类，只需要能识别握拳/张开即可。确保手部在摄像头视野内且光线充足。
